<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Link sheets, scripts, ico -->
    <script defer src="script.js"></script>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" href="assets/herb-buddy-logo.png" />
    <!-- Generic Meta -->
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Simple tool to calculate the profit from your last herb run with the latest prices" />
    <title>Herb Buddy</title>
    <!-- OG Meta -->
    <meta property="og:title" content="Herb Buddy" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://github.com/JoshPaulie/herbbuddy/blob/master/assets/herb-buddy-logo.png" />
    <meta property="og:description" content="Simple tool to calculate the profit from your last herb run with the latest prices" />
    <meta name="theme-color" content="#a6da95" />
    <!-- Icons -->
    <link href="https://cdn.lineicons.com/5.0/lineicons.css" rel="stylesheet" />
  </head>
  <body>
    <!-- Floating GitHub Button -->
    <a href="https://github.com/joshpaulie/herbbuddy" target="_blank" class="github-floating-btn" title="View on GitHub" aria-label="View on GitHub">
      <i class="lni lni-github"></i>
    </a>

    <main class="container">
      <header class="header">
        <div class="title-section">
          <img src="assets/herb-buddy-logo.png" class="logo" alt="Herb Buddy Logo" />
          <h1>Herb Buddy</h1>
        </div>
        <p class="subtitle">Calculate profit from your herb runs with live OSRS prices</p>
      </header>

      <section class="calculator">
        <div class="herb-selection">
          <label for="herbTypeSelect">Herb Type</label>
          <div class="herb-controls">
            <select id="herbTypeSelect" class="herb-select">
              <!-- Options will be populated by JavaScript -->
            </select>
            <button class="refresh-btn" id="refreshPricesBtn" title="Refresh prices" aria-label="Refresh prices"><i class="lni lni-refresh-circle-1-clockwise"></i></button>
          </div>
        </div>

        <div class="inputs-grid">
          <div class="input-group">
            <label for="herbCountInput">Herbs Harvested</label>
            <input type="number" id="herbCountInput" placeholder="0" min="0" />
            <div class="price-info" id="herbPriceDisplay">
              <span class="price-value" id="herbPriceValue">Loading...</span>
              <span class="price-label">per herb</span>
            </div>
          </div>

          <div class="input-group">
            <label for="seedCountInput">Seeds Used</label>
            <input type="number" id="seedCountInput" placeholder="8" value="8" min="0" />
            <div class="price-info" id="seedPriceDisplay">
              <span class="price-value" id="seedPriceValue">Loading...</span>
              <span class="price-label">per seed</span>
            </div>
          </div>
        </div>

        <div id="main-content" class="results" style="display: none">
          <div class="profit-display">
            <i class="lni lni-question-mark-circle profit-info-icon" id="profitInfoIcon" title="How is profit calculated?"></i>
            <div class="profit-amount">
              <span id="profit-amount">0</span>
              <img class="coins-img" src="assets/coins.png" alt="coins" />
            </div>
            <div class="profit-details"><span id="harvest-count">0</span> <span id="herb-name">ranarr</span> <span id="herb-unit">herbs</span> from <span id="seed-count">0</span> <span id="seed-unit">seeds</span></div>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <p>RSN: <b>bexlii</b> | <span id="version-display"></span></p>
    </footer>

    <!-- Profit Calculation Modal -->
    <div id="profitModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>How Profit is Calculated</h3>
          <span class="close-modal" id="closeModal">&times;</span>
        </div>
        <div class="modal-body">
          <p>The profit calculation is straightforward:</p>
          <div class="formula">
            <strong>Profit = (Herbs Harvested × Herb Price) - (Seeds Used × Seed Price)</strong>
          </div>
          <div class="formula-breakdown">
            <h4>Example:</h4>
            <ul>
              <li><strong>Herbs Harvested:</strong> 56 Ranarr herbs</li>
              <li><strong>Herb Price:</strong> 8,000 gp each</li>
              <li><strong>Seeds Used:</strong> 8 seeds</li>
              <li><strong>Seed Price:</strong> 40,000 gp each</li>
            </ul>
            <p><strong>Calculation:</strong> (56 × 8,000) - (8 × 40,000)</p>
            <p><strong>Simplified:</strong> 448,000 - 320,000</p>
            <p><strong>Result: </strong><span style="color: var(--ctp-macchiato-green)">128,000 gp</span></p>
            <!-- <p><strong>Calculation:</strong> (56 × 8,000) - (8 × 40,000) = 448,000 - 320,000 = <span style="color: var(--ctp-macchiato-green)">128,000 gp</span></p> -->
          </div>
          <p><small>Prices are fetched live from the OSRS API and may fluctuate.</small></p>
        </div>
      </div>
    </div>
  </body>
</html>
